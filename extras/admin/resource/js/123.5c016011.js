"use strict";(globalThis["webpackChunkideahut_quasar_admin"]=globalThis["webpackChunkideahut_quasar_admin"]||[]).push([[123],{1123:(e,i,l)=>{l.r(i),l.d(i,{default:()=>P});var t=l(1758),a=l(8790);const n={class:"q-ml-sm"},o={class:"full-width row flex-center text-accent q-gutter-sm"},s={class:"text-subtitle2"},r={key:0,class:"text-left"},d={class:"text-caption"};function c(e,i,l,c,p,m){const u=(0,t.g2)("q-item-label"),g=(0,t.g2)("q-item-section"),b=(0,t.g2)("q-tooltip"),f=(0,t.g2)("q-btn"),h=(0,t.g2)("q-item"),_=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-chip"),w=(0,t.g2)("q-space"),y=(0,t.g2)("q-badge"),q=(0,t.g2)("q-icon"),v=(0,t.g2)("q-inner-loading"),V=(0,t.g2)("q-checkbox"),x=(0,t.g2)("q-input"),C=(0,t.g2)("q-table"),F=(0,t.g2)("q-card"),Q=(0,t.g2)("Search"),R=(0,t.g2)("q-dialog"),A=(0,t.g2)("View2"),X=(0,t.g2)("Edit2");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(F,{class:"background-layout"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{class:"q-pa-none header-main"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{class:"q-pr-none"},{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"text-h6 text-white"},{default:(0,t.k6)((()=>[(0,t.eW)((0,a.v_)(c.template.title+" - "+c.definition.title),1)])),_:1})])),_:1}),(0,t.bF)(g,{side:""},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close",onClick:m.on_close_click},{default:(0,t.k6)((()=>[(0,t.bF)(b,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,a.v_)(e.$t("label.close")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),c.labels?.length?((0,t.uX)(),(0,t.Wv)(_,{key:0,class:"q-pa-sm q-mt-xs"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.labels,((e,i)=>((0,t.uX)(),(0,t.Wv)(k,{key:i,color:c.chips[i%c.chips.length],"text-color":"white",class:"ellipsis-text"},{default:(0,t.k6)((()=>[(0,t.Lk)("strong",null,[(0,t.Lk)("span",null,(0,a.v_)(e.title)+":",1)]),(0,t.eW)(),(0,t.Lk)("span",n,(0,a.v_)(e.value),1)])),_:2},1032,["color"])))),128))])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(_,{style:{"max-height":"80vh","overflow-y":"scroll !important"},class:"q-pa-xs"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{class:"table-sticky-header q-ma-sm",rows:c.table.rows,columns:c.table.columns,"visible-columns":c.table.visibles,"row-key":"_pk_",loading:c.table.loading,selection:c.util.isObject(c.definition.table)?c.definition.table.selection:"single",selected:c.table.selected,"onUpdate:selected":i[1]||(i[1]=e=>c.table.selected=e),pagination:c.table.pagination,"onUpdate:pagination":i[2]||(i[2]=e=>c.table.pagination=e),dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":e=>{},"rows-per-page-options":c.util.isObject(c.definition.table)&&c.definition.table.page?.options?c.definition.table.page.options:[10,20,30],onRequest:m.do_request,"binary-state-sort":"",separator:c.util.isObject(c.definition.table)?c.definition.table.separator:"cell",bordered:"",style:{"max-height":"72vh"}},{top:(0,t.k6)((()=>[c.util.isObject(c.definition.table)&&"multiple"===c.definition.table.selection&&c.fxGrid.permission.deletes(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.Wv)(f,{key:0,glossy:"",round:"",dense:"",class:"q-ma-none q-mr-md",color:"negative",icon:"delete",disable:!c.table.selected.length,loading:c.table.deleting,onClick:m.on_delete_click},null,8,["disable","loading","onClick"])):(0,t.Q3)("",!0),c.fxGrid.permission.add(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.Wv)(f,{key:1,glossy:"",round:"",dense:"",class:"q-ma-none q-mr-md",color:"teal",icon:"add",onClick:m.on_add_click},null,8,["onClick"])):(0,t.Q3)("",!0),(0,t.bF)(w),c.search.filters?.length?((0,t.uX)(),(0,t.Wv)(f,{key:2,glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"deep-orange",icon:"search",onClick:m.on_search_click},{default:(0,t.k6)((()=>[c.search.empty?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(y,{key:0,class:"led-green",floating:""}))])),_:1},8,["onClick"])):(0,t.Q3)("",!0),(0,t.bF)(f,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:c.table.loading,onClick:m.on_refresh_click},null,8,["loading","onClick"])])),"no-data":(0,t.k6)((({message:e})=>[(0,t.Lk)("div",o,[(0,t.bF)(q,{size:"2em",name:"block"}),(0,t.Lk)("span",s,(0,a.v_)(e),1)])])),loading:(0,t.k6)((()=>[(0,t.bF)(v,{showing:"",color:"primary"})])),"header-selection":(0,t.k6)((e=>[c.util.isObject(c.definition.table)&&"multiple"===c.definition.table.selection&&c.fxGrid.permission.deletes(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(V,{dense:"",color:"primary",class:"q-ma-none q-ml-sm q-mr-sm",modelValue:e.selected,"onUpdate:modelValue":i=>e.selected=i},null,8,["modelValue","onUpdate:modelValue"])])):(0,t.Q3)("",!0)])),"body-selection":(0,t.k6)((e=>[c.util.isObject(c.definition.table)&&"multiple"===c.definition.table.selection&&c.fxGrid.permission.deletes(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.Wv)(V,{key:0,dense:"",color:"primary",class:"q-ma-none q-ml-sm q-mr-sm",modelValue:e.selected,"onUpdate:modelValue":i=>e.selected=i},null,8,["modelValue","onUpdate:modelValue"])):c.util.isObject(c.definition.table)&&c.fxGrid.permission.delete(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.Wv)(f,{key:1,glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"negative",icon:"delete",onClick:i=>m.on_delete_click(e)},null,8,["onClick"])):(0,t.Q3)("",!0),c.fxGrid.permission.edit(c.permission)&&!c.onlyView?((0,t.uX)(),(0,t.Wv)(f,{key:2,glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"primary",icon:"drive_file_rename_outline",onClick:i=>m.on_edit_click(e)},null,8,["onClick"])):(0,t.Q3)("",!0),c.fxGrid.permission.view(c.permission)?((0,t.uX)(),(0,t.Wv)(f,{key:3,glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-purple",icon:"visibility",onClick:i=>m.on_view_click(e)},null,8,["onClick"])):(0,t.Q3)("",!0)])),pagination:(0,t.k6)((e=>[e.pagesNumber>2?((0,t.uX)(),(0,t.Wv)(f,{key:0,glossy:"",size:"sm",icon:"first_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.firstPage},null,8,["disable","onClick"])):(0,t.Q3)("",!0),(0,t.bF)(f,{glossy:"",size:"sm",icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:e.isFirstPage,onClick:e.prevPage},null,8,["disable","onClick"]),(0,t.bF)(x,{dense:"",borderless:"",type:"number","input-class":"text-center q-ml-xs q-mr-xs","input-style":"max-width: 60px;",modelValue:c.table.pagination.page,"onUpdate:modelValue":[i[0]||(i[0]=e=>c.table.pagination.page=e),m.on_page_changed]},(0,t.eX)({_:2},[c.util.isObject(c.definition.table)&&c.util.isObject(c.definition.table.page)&&!0===c.definition.table.page.count?{name:"append",fn:(0,t.k6)((()=>[(0,t.Lk)("span",d," / "+(0,a.v_)(e.pagesNumber),1)])),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(f,{glossy:"",size:"sm",icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.nextPage},null,8,["disable","onClick"]),e.pagesNumber>2?((0,t.uX)(),(0,t.Wv)(f,{key:1,glossy:"",size:"sm",icon:"last_page",color:"grey-8",round:"",dense:"",flat:"",disable:e.isLastPage,onClick:e.lastPage},null,8,["disable","onClick"])):(0,t.Q3)("",!0)])),_:1},8,["rows","columns","visible-columns","loading","selection","selected","pagination","dense","no-data-label","rows-per-page-options","onRequest","separator"])])),_:1})])),_:1}),(0,t.bF)(R,{modelValue:c.dialog.search.show,"onUpdate:modelValue":i[3]||(i[3]=e=>c.dialog.search.show=e),persistent:"","transition-show":"slide-down","transition-hide":"none"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{parameters:c.dialog.search.parameters,onClose:m.on_close_dialog_search},null,8,["parameters","onClose"])])),_:1},8,["modelValue"]),(0,t.bF)(R,{modelValue:c.dialog.view.show,"onUpdate:modelValue":i[4]||(i[4]=e=>c.dialog.view.show=e),persistent:"","transition-show":"slide-down","transition-hide":"none"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{parameters:c.dialog.view.parameters},null,8,["parameters"])])),_:1},8,["modelValue"]),(0,t.bF)(R,{modelValue:c.dialog.edit.show,"onUpdate:modelValue":i[5]||(i[5]=e=>c.dialog.edit.show=e),persistent:"","transition-show":"slide-down","transition-hide":"none"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{parameters:c.dialog.edit.parameters,onClose:m.on_close_dialog_edit},null,8,["parameters","onClose"])])),_:1},8,["modelValue"])],64)}l(239);var p=l(8734),m=l(9928),u=l(8916),g=l(3336);const b={props:["parameters"],emits:["close"],components:{Search:(0,t.$V)((()=>Promise.all([l.e(121),l.e(996)]).then(l.bind(l,8991)))),View2:(0,t.$V)((()=>l.e(948).then(l.bind(l,3948)))),Edit2:(0,t.$V)((()=>Promise.all([l.e(121),l.e(610)]).then(l.bind(l,7610))))},setup(){return{uix:u.L,util:m.Z,fxGrid:g.V,template:(0,p.KR)({}),definition:(0,p.KR)({}),permission:(0,p.KR)({}),parentRow:(0,p.KR)({}),relations:(0,p.KR)([]),onlyView:(0,p.KR)(!1),replica:(0,p.KR)(null),labels:(0,p.KR)([]),chips:["red-10","deep-purple-10","light-blue-10","brown-10","deep-orange-10","blue-grey-10"],dialog:(0,p.KR)({search:{show:!1,parameters:null},view:{show:!1,parameters:null},edit:{show:!1,parameters:null}}),search:(0,p.KR)({filters:[],empty:!0}),table:(0,p.KR)({rows:[],columns:[],visibles:[],selected:[],pagination:{},loading:!1,deleting:!1,separator:"none"})}},created(){let e=this,i=g.V.get.object(e.parameters);e.template=g.V.get.object(i.template),e.definition=g.V.get.object(i.definition),e.parentRow=g.V.get.object(i.parentRow),e.relations=g.V.get.array(i.relations),e.replica=g.V.get.number(i.replica,null),e.onlyView=!0===i.onlyView,e.permission={actions:g.V.copy(e.template.actions)};let l=e.definition?.action?.exclude?e.definition.action.exclude:[];if(e.permission.actions=e.template.actions.filter((e=>!l.includes(e))),e.search={empty:!0,filters:g.V.copy(g.V.get.array(e.definition.table.filters))},e.table={rows:[],columns:e.definition.table.columns,visibles:e.definition.table.visibles,selected:[],pagination:{page:1,rowsPerPage:e.definition.table.page.default,sortBy:e.definition.table.order.field,descending:!0===e.definition.table.order.descending},loading:!1,deleting:!1,separator:m.Z.isString(e.definition.table.separator)?e.definition.table.separator:"none"},e.labels=[],m.Z.isArray(e.definition.labels))for(const t of e.definition.labels){let i=g.V.copy(t);m.Z.isString(i.value)&&(i.value=m.Z.getFieldValue(i.value,e.parentRow),e.labels.push(i))}e.do_request({pagination:e.table.pagination})},methods:{do_request(e){let i=this;g.V.action.page({props:e,table:i.table,search:i.search,definition:i.definition,replica:i.replica,relations:i.relations,allUseSameReplica:i.template.allUseSameReplica})},on_close_click(){let e=this;e.$emit("close")},on_refresh_click(){let e=this;e.do_request({pagination:e.table.pagination})},on_delete_click(e){let i=this;g.V.action.delete({row:e.row,definition:i.definition,table:i.table,deleting:i.deleting,replica:i.replica,onSuccess:function(){i.do_request({pagination:i.table.pagination})}})},on_search_click(){let e=this,i=e.dialog.search;i.parameters={filters:g.V.copy(e.search.filters),template:e.template},i.show=!0},on_close_dialog_search(e){let i=this;if(m.Z.isArray(e)){let l,t,a=i.search;a.filters=e,a.empty=!0;for(const e of a.filters)if(l=m.Z.isDefined(e.value)?e.value:"",t=m.Z.isDefined(e.value2)?e.value2:"",""!==l||""!==t){a.empty=!1;break}i.dialog.search={show:!1,parameters:null},i.table.pagination.page=1,i.do_request({pagination:i.table.pagination})}},on_view_click(e){let i=this;i.dialog.view={show:!0,parameters:{parentRow:i.parentRow,row:e.row,template:i.template,replica:i.replica,definition:i.definition}}},on_edit_click(e){let i=this;i.dialog.edit={show:!0,parameters:{parentRow:i.parentRow,row:e.row,template:i.template,replica:i.replica,definition:i.definition,index:e.rowIndex,relations:i.relations}}},on_add_click(){let e=this;e.dialog.edit={show:!0,parameters:{parentRow:e.parentRow,template:e.template,replica:e.replica,definition:e.definition,relations:e.relations}}},on_close_dialog_edit(e){let i=this,l=e.row;if(l)if(e.is_edit){if(!m.Z.isDefined(l._pk_))return i.dialog.edit={show:!1,parameters:null},void setTimeout((function(){i.dialog.edit={show:!0,parameters:{row:l,parentRow:i.parentRow,template:i.template,replica:i.replica,definition:i.definition,relations:i.relations}}}),100);i.table.rows[e.index]=l}else i.do_request({pagination:i.table.pagination});i.dialog.edit={show:!1,parameters:null}},on_page_changed(){let e=this,i=+e.table.pagination.page;!isNaN(i)&&i>0&&e.do_request({pagination:e.table.pagination})}}};var f=l(2807),h=l(7569),_=l(7066),k=l(5329),w=l(3418),y=l(5779),q=l(9001),v=l(8151),V=l(8141),x=l(3621),C=l(1173),F=l(4031),Q=l(4609),R=l(4264),A=l(2225),X=l(8020),W=l(7201),j=l(8582),K=l.n(j);const U=(0,f.A)(b,[["render",c]]),P=U;K()(b,"components",{QCard:h.A,QCardSection:_.A,QItem:k.A,QItemSection:w.A,QItemLabel:y.A,QBtn:q.A,QTooltip:v.A,QChip:V.A,QTable:x.A,QSpace:C.A,QBadge:F.A,QIcon:Q.A,QInnerLoading:R.A,QCheckbox:A.A,QInput:X.A,QDialog:W.A})}}]);