"use strict";(globalThis["webpackChunkideahut_quasar_template"]=globalThis["webpackChunkideahut_quasar_template"]||[]).push([[87],{4087:(e,l,o)=>{o.r(l),o.d(l,{default:()=>K});var a=o(1758),s=o(8790);const n={class:"full-width row flex-center text-accent q-gutter-sm"},t={class:"text-subtitle2"},i={key:0},d={class:"col-6 text-left"},r={class:"col-6 text-right"},c={class:"text-h6"};function u(e,l,o,u,b,f){const h=(0,a.g2)("q-space"),p=(0,a.g2)("q-tooltip"),m=(0,a.g2)("q-btn"),g=(0,a.g2)("q-icon"),k=(0,a.g2)("q-inner-loading"),_=(0,a.g2)("q-table"),w=(0,a.g2)("q-card-section"),q=(0,a.g2)("q-input"),F=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),x=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{class:"table-sticky-header q-ma-sm",rows:u.table.rows,columns:u.columns,"row-key":"name",loading:u.table.loading,selection:"single",selected:u.table.selected,"onUpdate:selected":l[0]||(l[0]=e=>u.table.selected=e),dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":e=>{},"binary-state-sort":"",separator:"cell","hide-bottom":"",bordered:""},{top:(0,a.k6)((()=>[(0,a.bF)(h),(0,a.bF)(m,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:u.table.loading,onClick:f.do_request},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.refresh")),1)])),_:1})])),_:1},8,["loading","onClick"])])),"no-data":(0,a.k6)((({message:e})=>[(0,a.Lk)("div",n,[(0,a.bF)(g,{size:"2em",name:"block"}),(0,a.Lk)("span",t,(0,s.v_)(e),1)])])),loading:(0,a.k6)((()=>[(0,a.bF)(k,{showing:"",color:"primary"})])),"body-selection":(0,a.k6)((l=>[!0===l.row.canExecute?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"pink-10",icon:"delete",loading:u.table.flushing.db[l.row.name],onClick:e=>f.on_flush_click("db",l)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.flush_db")),1)])),_:1})])),_:2},1032,["loading","onClick"]),(0,a.bF)(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-orange-10",icon:"delete_sweep",loading:u.table.flushing.all[l.row.name],onClick:e=>f.on_flush_click("all",l)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.flush_all")),1)])),_:1})])),_:2},1032,["loading","onClick"]),(0,a.bF)(m,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"teal-10",icon:"lightbulb",onClick:e=>f.on_info_click(l)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.info")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,a.Q3)("",!0)])),_:1},8,["rows","columns","loading","selected","dense","no-data-label"]),(0,a.bF)(v,{modelValue:u.flush.show,"onUpdate:modelValue":l[2]||(l[2]=e=>u.flush.show=e),persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{class:"q-pa-xs q-pl-lg q-pr-lg text-center"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.flush_input_code")),1)])),_:1}),(0,a.bF)(w,{class:"q-pa-xs q-pl-lg q-pr-lg text-center text-weight-bold"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(u.flush.text),1)])),_:1}),(0,a.bF)(w,{class:"q-pa-sm"},{default:(0,a.k6)((()=>[(0,a.bF)(q,{modelValue:u.flush.code,"onUpdate:modelValue":l[1]||(l[1]=e=>u.flush.code=e),type:"text",filled:"",dense:"","input-class":"text-center"},null,8,["modelValue"])])),_:1}),(0,a.bF)(F,{class:"row"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bo)((0,a.bF)(m,{"no-caps":"",ripple:"",glossy:"",label:e.$t("label.cancel"),color:"negative"},null,8,["label"]),[[x]])]),(0,a.Lk)("div",r,[(0,a.bF)(m,{"no-caps":"",ripple:"",glossy:"",label:e.$t("label.continue"),color:"positive",loading:u.flush.loading,disable:!u.flush.code,onClick:f.on_flush_click},null,8,["label","loading","disable","onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.bF)(v,{modelValue:u.info.show,"onUpdate:modelValue":l[5]||(l[5]=e=>u.info.show=e),"transition-show":"scale","transition-hide":"fade",persistent:""},{default:(0,a.k6)((()=>[(0,a.bF)(y,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.k6)((()=>[(0,a.bF)(w,{class:"q-pa-none"},{default:(0,a.k6)((()=>[(0,a.bF)(_,{class:"table-sticky-header no-column",style:{"max-height":"70vh"},rows:u.info.rows,separator:"cell",filter:u.info.filter,"rows-per-page-options":[0],"hide-bottom":"","hide-header":"",bordered:"",dense:""},{"top-left":(0,a.k6)((()=>[(0,a.Lk)("div",c,(0,s.v_)(u.info.title),1)])),"top-right":(0,a.k6)((()=>[(0,a.bF)(q,{borderless:"",dense:"",modelValue:u.info.filter,"onUpdate:modelValue":l[3]||(l[3]=e=>u.info.filter=e),placeholder:e.$t("label.search")},{append:(0,a.k6)((()=>[(0,a.bF)(g,{name:"search"})])),_:1},8,["modelValue","placeholder"]),(0,a.bF)(m,{round:"",glossy:"",dense:"",size:"sm",icon:"refresh",class:"q-ml-lg",loading:u.info.loading,onClick:f.get_properties},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.refresh")),1)])),_:1})])),_:1},8,["loading","onClick"]),(0,a.bF)(m,{round:"",glossy:"",dense:"",size:"sm",icon:"close",class:"q-ml-sm",onClick:l[4]||(l[4]=e=>u.info.show=!1)},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("label.close")),1)])),_:1})])),_:1})])),_:1},8,["rows","filter"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}o(239);var b=o(8734),f=o(9928),h=o(8916),p=o(526);const m={setup(){return{util:f.Z,type:(0,b.KR)(null),bean:(0,b.KR)(null),is_group:(0,b.KR)(!1),columns:[],table:(0,b.KR)({rows:[],columns:[],loading:!1,flushing:{all:{},db:{}}}),flush:(0,b.KR)({show:!1,loading:!1,name:null,type:null,text:null,code:null}),info:(0,b.KR)({show:!1,loading:!1,rows:[],name:null,title:null,filter:null})}},created(){let e=this;e.columns=[{name:"label",label:e.$t("label.name"),field:"label",align:"left",sortable:!0},{name:"keyType",label:e.$t("label.key"),field:"keyType",align:"left",sortable:!0},{name:"valueType",label:e.$t("label.value"),field:"valueType",align:"left",sortable:!0}],e.do_request()},methods:{do_request(){let e=this;e.table.loading=!0,p.F.call({path:"/redis/infos",onFinish(){e.table.loading=!1},onSuccess(l){if(f.Z.isArray(l)){e.table.rows=l;for(const l of e.table.rows)e.table.flushing.all[l.name]=!1,e.table.flushing.db[l.name]=!1}}})},on_flush_click(e,l){let o=this;f.Z.isDefined(e)&&f.Z.isDefined(l)?h.L.confirm((function(){o.table.flushing[e][l.row.name]=!0,p.F.call({path:"/redis/flush/"+e,params:{name:l.row.name},onFinish(){o.table.flushing[e][l.row.name]=!1},onSuccess(a){f.Z.isString(a)&&(o.flush={show:!0,loading:!1,name:l.row.name,type:e,text:a,code:null})}})}),"confirm.flush_"+e,l.row.label):(o.flush.loading=!0,p.F.call({path:"/redis/flush/"+o.flush.type,method:"post",params:{name:o.flush.name,code:o.flush.code},onFinish(){o.flush.loading=!1},onSuccess(e){o.flush.show=!1}}))},on_info_click(e){let l=this;l.info.show=!0,l.info.name=e.row.name,l.info.title=e.row.label,l.get_properties()},get_properties(){let e=this;e.info.loading=!0,p.F.call({path:"/redis/properties",params:{name:e.info.name},onFinish(){e.info.loading=!1},onSuccess(l){f.Z.isObject(l)&&(e.info.rows=[],Object.keys(l).forEach((o=>{e.info.rows.push({label:o,value:l[o]})})),e.info.rows.sort(((e,l)=>{const o=e.label.toUpperCase(),a=l.label.toUpperCase();return o<a?-1:o>a?1:0})))},onError(){e.info.show=!1},notify:!0})}}};var g=o(2807),k=o(3621),_=o(1173),w=o(9001),q=o(8151),F=o(4609),y=o(4264),v=o(7201),x=o(7569),C=o(7066),A=o(8020),$=o(6334),Q=o(2769),V=o(8582),T=o.n(V);const W=(0,g.A)(m,[["render",u]]),K=W;T()(m,"components",{QTable:k.A,QSpace:_.A,QBtn:w.A,QTooltip:q.A,QIcon:F.A,QInnerLoading:y.A,QDialog:v.A,QCard:x.A,QCardSection:C.A,QInput:A.A,QCardActions:$.A}),T()(m,"directives",{ClosePopup:Q.A})}}]);