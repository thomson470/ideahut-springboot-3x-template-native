"use strict";(globalThis["webpackChunkideahut_quasar_template"]=globalThis["webpackChunkideahut_quasar_template"]||[]).push([[697],{7697:(e,l,a)=>{a.r(l),a.d(l,{default:()=>v});var t=a(1758),n=a(8790);const o={class:"full-width row flex-center text-accent q-gutter-sm"},s={class:"text-subtitle2"},i={key:0};function r(e,l,a,r,b,c){const d=(0,t.g2)("q-space"),m=(0,t.g2)("q-tooltip"),u=(0,t.g2)("q-btn"),g=(0,t.g2)("q-icon"),p=(0,t.g2)("q-inner-loading"),f=(0,t.g2)("q-table"),h=(0,t.g2)("Keys"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(f,{class:"table-sticky-header q-ma-sm",rows:r.table.rows,columns:r.table.columns,"row-key":"name",loading:r.table.loading,selection:"single",selected:r.table.selected,"onUpdate:selected":l[0]||(l[0]=e=>r.table.selected=e),dense:e.$q.screen.lt.md,"no-data-label":e.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":e=>{},"binary-state-sort":"",separator:"cell","hide-bottom":"",bordered:""},{top:(0,t.k6)((()=>[(0,t.bF)(d),(0,t.bF)(u,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:r.table.loading,onClick:c.do_request},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("label.refresh")),1)])),_:1})])),_:1},8,["loading","onClick"])])),"no-data":(0,t.k6)((({message:e})=>[(0,t.Lk)("div",o,[(0,t.bF)(g,{size:"2em",name:"block"}),(0,t.Lk)("span",s,(0,n.v_)(e),1)])])),loading:(0,t.k6)((()=>[(0,t.bF)(p,{showing:"",color:"primary"})])),"body-selection":(0,t.k6)((l=>[0!==l.row.limit?((0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(u,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-orange-10",icon:"clear_all",loading:r.table.clearing[l.row.name],onClick:e=>c.on_clear_click(l)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("label.clear")),1)])),_:1})])),_:2},1032,["loading","onClick"]),(0,t.bF)(u,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"primary",icon:"list_alt",onClick:e=>c.on_keys_click(l)},{default:(0,t.k6)((()=>[(0,t.bF)(m,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("label.keys")),1)])),_:1})])),_:2},1032,["onClick"])])):(0,t.Q3)("",!0)])),_:1},8,["rows","columns","loading","selected","dense","no-data-label"]),(0,t.bF)(_,{modelValue:r.dialog.keys.show,"onUpdate:modelValue":l[1]||(l[1]=e=>r.dialog.keys.show=e),persistent:"","transition-show":"slide-down","transition-hide":"none"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{parameters:r.dialog.keys.parameters},null,8,["parameters"])])),_:1},8,["modelValue"])],64)}a(239);var b=a(8734),c=a(9928),d=a(8916),m=a(526);const u={components:{Keys:(0,t.$V)((()=>Promise.all([a.e(121),a.e(544)]).then(a.bind(a,7544))))},setup(){return{util:c.Z,type:(0,b.KR)(null),handler:(0,b.KR)(null),columns:{single:[],group:[]},table:(0,b.KR)({rows:[],columns:[],loading:!1,clearing:{}}),dialog:(0,b.KR)({keys:{show:!1,parameters:null}})}},created(){let e=this;e.columns={single:[{name:"label",label:e.$t("label.name"),field:"label",align:"left",sortable:!0},{name:"limit",label:e.$t("label.limit"),field:"limit",align:"left",sortable:!0},{name:"nullable",label:e.$t("label.nullable"),field:"nullable",align:"left",sortable:!0}],group:[{name:"label",label:e.$t("label.group"),field:"label",align:"left",sortable:!0},{name:"limit",label:e.$t("label.limit"),field:"limit",align:"left",sortable:!0},{name:"nullable",label:e.$t("label.nullable"),field:"nullable",align:"left",sortable:!0},{name:"expiry",label:e.$t("label.expiry"),field:"expiry",align:"left",sortable:!0}]},e.do_init()},beforeUpdate(){this.do_init()},methods:{do_init(){let e=this,l=e.$route.query.type,a=e.$route.query.handler;l===e.type&&a===e.handler||(e.type=l,e.handler=a,e.do_request())},do_request(){let e=this;e.table.loading=!0,m.F.call({path:"/cache/info",params:{type:e.type,handler:e.handler},onFinish(){e.table.loading=!1},onSuccess(l,a){if(a=c.Z.isObject(a)?a:{},"group"===a.type){l=c.Z.isObject(l)?l:{};let a=c.Z.isObject(l.groups)?l.groups:{};e.table.columns=e.columns.group,e.table.columns[1].format=l=>0===l?e.$t("label.unlimited"):l,e.table.columns[3].format=l=>l&&l>0?l:e.$t("label.never_expire"),e.table.rows=[],Object.keys(a).forEach((l=>{let t=a[l];e.table.rows.push({name:t.name,label:t.name,limit:t.limit,nullable:t.nullable,expiry:t.expiry,is_group:!0}),e.table.clearing[t.name]=!1}))}else if("single"==a.type){e.table.columns=e.columns.single,e.table.columns[1].format=l=>0===l?e.$t("label.unlimited"):l,e.table.rows=c.Z.isArray(l)?l:[];for(const l of e.table.rows)e.table.clearing[l.name]=!1,l.is_group=!1}}})},on_clear_click(e){let l=this;d.L.confirm((function(){let a;a=e.row.is_group?{name:l.handler,group:e.row.name}:{name:e.row.name},l.table.clearing[e.row.name]=!0,m.F.call({path:"/cache/clear",method:"post",data:{info:a},onSuccess(a){setTimeout((function(){l.table.clearing[e.row.name]=!1,l.do_request()}),500)},onError(){l.table.clearing[e.row.name]=!1},notify:!0})}),"confirm.clear",e.row.label)},on_keys_click(e){let l=this;l.dialog.keys={show:!0,parameters:{title:e.row.label,name:e.row.is_group?l.handler:e.row.name,group:e.row.is_group?e.row.name:null}}}}};var g=a(2807),p=a(3621),f=a(1173),h=a(9001),_=a(8151),k=a(4609),y=a(4264),w=a(7201),q=a(8582),$=a.n(q);const F=(0,g.A)(u,[["render",r]]),v=F;$()(u,"components",{QTable:p.A,QSpace:f.A,QBtn:h.A,QTooltip:_.A,QIcon:k.A,QInnerLoading:y.A,QDialog:w.A})}}]);