"use strict";(globalThis["webpackChunkideahut_quasar_template"]=globalThis["webpackChunkideahut_quasar_template"]||[]).push([[997],{997:(e,l,a)=>{a.r(l),a.d(l,{default:()=>O});var t=a(1758),o=a(8790);const i={class:"row"},n={class:"bg-primary"},d={class:"q-pa-xs bg-white row"},s={class:"col-6 text-left"},u={class:"col-6 text-right"},p={class:"col-6 q-pr-xs text-left"},c={class:"col-6 q-pl-xs text-right"};function r(e,l,a,r,m,b){const k=(0,t.g2)("q-item-label"),f=(0,t.g2)("q-item-section"),v=(0,t.g2)("q-tooltip"),_=(0,t.g2)("q-btn"),y=(0,t.g2)("q-item"),g=(0,t.g2)("q-card-section"),V=(0,t.g2)("q-input"),h=(0,t.g2)("q-select"),q=(0,t.g2)("q-tab"),x=(0,t.g2)("q-tabs"),F=(0,t.g2)("q-separator"),w=(0,t.g2)("q-date"),Q=(0,t.g2)("q-tab-panel"),A=(0,t.g2)("q-time"),U=(0,t.g2)("q-tab-panels"),C=(0,t.g2)("q-popup-proxy"),K=(0,t.g2)("q-icon"),W=(0,t.g2)("q-fab-action"),X=(0,t.g2)("q-fab"),R=(0,t.g2)("q-card-actions"),$=(0,t.g2)("q-card"),j=(0,t.g2)("Pick"),L=(0,t.g2)("q-dialog"),Z=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)($,{style:(0,o.Tr)("width: "+(e.$q.screen.lt.md?"100%;":"50%;"))},{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"q-pa-none header-main"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{class:"q-pr-none"},{default:(0,t.k6)((()=>[(0,t.bF)(f,null,{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"text-h6 text-white"},{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(r.title),1)])),_:1})])),_:1}),(0,t.bF)(f,{side:""},{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(_,{class:"text-caption text-white q-pl-xs q-pr-xs q-mr-xs",flat:"",round:"",glossy:"",icon:"close",disable:r.saving},{default:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("label.close")),1)])),_:1})])),_:1},8,["disable"])),[[Z]])])),_:1})])),_:1})])),_:1}),(0,t.bF)(g,{style:{"max-height":"80vh"},class:"q-pa-xs q-mt-xs scroll"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",i,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(r.fields,((l,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-md-6 col-sm-12 q-mb-xs",style:{width:"100%"}},["words"===l.type?((0,t.uX)(),(0,t.Wv)(V,{key:0,type:"text",label:l.label,readonly:!l.editable,modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,filled:"",autogrow:"",style:{"max-height":"120px",overflow:"scroll"}},null,8,["label","readonly","modelValue","onUpdate:modelValue"])):"enum"===l.type?((0,t.uX)(),(0,t.Wv)(h,{key:1,modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,label:l.label,readonly:!0!==l.editable,options:r.enums[l.enum],"option-value":"value","option-label":"label","emit-value":"","map-options":"","options-cover":"",filled:""},null,8,["modelValue","onUpdate:modelValue","label","readonly","options"])):"option"===l.type?((0,t.uX)(),(0,t.Wv)(h,{key:2,modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,label:l.label,readonly:!0!==l.editable,options:r.options[l.option],"option-value":"value","option-label":"label","emit-value":"","map-options":"","options-cover":"",filled:""},null,8,["modelValue","onUpdate:modelValue","label","readonly","options"])):"datetime"===l.type||"date"===l.type||"time"===l.type?((0,t.uX)(),(0,t.Wv)(V,{key:3,type:"text",label:l.label,readonly:!l.editable,modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,filled:""},{append:(0,t.k6)((()=>[(0,t.bF)(K,{name:"time"===l.type?"schedule":"date"===l.type?"calendar_month":"event",class:"cursor-pointer"},{default:(0,t.k6)((()=>[(0,t.bF)(C,{"transition-show":"scale","transition-hide":"scale",cover:"",onBeforeShow:e=>{l.proxy_value=l.value,l.tab="time"===l.type?"time":"date"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.bF)(x,{modelValue:l.tab,"onUpdate:modelValue":e=>l.tab=e,class:"bg-primary text-grey-5 shadow-2 text-subtitle2",align:"justify","no-caps":"","indicator-color":"transparent","active-color":"white"},{default:(0,t.k6)((()=>["datetime"===l.type||"date"===l.type?((0,t.uX)(),(0,t.Wv)(q,{key:0,name:"date"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,o.v_)(e.$t("label.date")),1)])),_:1})):(0,t.Q3)("",!0),"datetime"===l.type||"time"===l.type?((0,t.uX)(),(0,t.Wv)(q,{key:1,name:"time"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,o.v_)(e.$t("label.time")),1)])),_:1})):(0,t.Q3)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(F),(0,t.bF)(U,{modelValue:l.tab,"onUpdate:modelValue":e=>l.tab=e},{default:(0,t.k6)((()=>["datetime"===l.type||"date"===l.type?((0,t.uX)(),(0,t.Wv)(Q,{key:0,name:"date",class:"q-pa-none"},{default:(0,t.k6)((()=>[(0,t.bF)(w,{modelValue:l.proxy_value,"onUpdate:modelValue":e=>l.proxy_value=e,mask:l.format,square:""},null,8,["modelValue","onUpdate:modelValue","mask"])])),_:2},1024)):(0,t.Q3)("",!0),"datetime"===l.type||"time"===l.type?((0,t.uX)(),(0,t.Wv)(Q,{key:1,name:"time",class:"q-pa-none"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{modelValue:l.proxy_value,"onUpdate:modelValue":e=>l.proxy_value=e,mask:l.format,format24h:"",square:""},null,8,["modelValue","onUpdate:modelValue","mask"])])),_:2},1024)):(0,t.Q3)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,t.bF)(F),(0,t.Lk)("div",d,[(0,t.Lk)("div",s,[(0,t.bo)((0,t.bF)(_,{label:e.$t("label.cancel"),color:"negative","no-caps":""},null,8,["label"]),[[Z]])]),(0,t.Lk)("div",u,[(0,t.bo)((0,t.bF)(_,{label:e.$t("label.ok"),color:"secondary","no-caps":"",onClick:e=>l.value=l.proxy_value},null,8,["label","onClick"]),[[Z]])])])])])),_:2},1032,["onBeforeShow"])])),_:2},1032,["name"])])),_:2},1032,["label","readonly","modelValue","onUpdate:modelValue"])):"pick"===l.type?((0,t.uX)(),(0,t.Wv)(V,{key:4,type:"text",label:l.label,readonly:!l.editable,modelValue:l.text,"onUpdate:modelValue":e=>l.text=e,filled:""},(0,t.eX)({_:2},[l.editable?{name:"append",fn:(0,t.k6)((()=>[(0,t.bF)(X,{modelValue:l.fab,"onUpdate:modelValue":e=>l.fab=e,icon:"flaky",direction:"left",padding:"none",flat:"",class:"q-ma-none q-pa-none"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{color:"secondary",icon:"fact_check",onClick:e=>b.on_pick_select_click(l)},{default:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("label.select")),1)])),_:1})])),_:2},1032,["onClick"]),l.value?((0,t.uX)(),(0,t.Wv)(W,{key:0,color:"negative",icon:"delete_forever",onClick:e=>b.on_pick_remove_click(l)},{default:(0,t.k6)((()=>[(0,t.bF)(v,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)(e.$t("label.delete")),1)])),_:1})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),key:"0"}:void 0]),1032,["label","readonly","modelValue","onUpdate:modelValue"])):((0,t.uX)(),(0,t.Wv)(V,{key:5,type:l.type,label:l.label,readonly:!l.editable,modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,filled:""},null,8,["type","label","readonly","modelValue","onUpdate:modelValue"]))])))),128))])])),_:1}),(0,t.bF)(F),(0,t.bF)(R,{class:"row"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,[(0,t.bo)((0,t.bF)(_,{label:e.$t("label.cancel"),color:"negative","no-caps":"",glossy:"",disable:r.saving},null,8,["label","disable"]),[[Z]])]),(0,t.Lk)("div",c,[(0,t.bF)(_,{label:e.$t("label.save"),color:"secondary","no-caps":"",glossy:"",loading:r.saving,onClick:b.on_save_click},null,8,["label","loading","onClick"])])])),_:1})])),_:1},8,["style"]),(0,t.bF)(L,{modelValue:r.dialog.pick.show,"onUpdate:modelValue":l[0]||(l[0]=e=>r.dialog.pick.show=e),persistent:"","transition-show":"slide-down","transition-hide":"none"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{parameters:r.dialog.pick.parameters,onClose:b.on_close_dialog_pick},null,8,["parameters","onClose"])])),_:1},8,["modelValue"])],64)}a(239);var m=a(8734),b=a(9928),k=a(3336);const f={props:["parameters"],emits:["close"],components:{Pick:(0,t.$V)((()=>a.e(658).then(a.bind(a,9658))))},setup(){return{id:(0,m.KR)(null),title:(0,m.KR)(""),is_edit:(0,m.KR)(!1),saving:(0,m.KR)(!1),index:(0,m.KR)(null),fields:(0,m.KR)(null),form:(0,m.KR)(null),template:(0,m.KR)({options:{},enums:{}}),replica:(0,m.KR)(null),relations:(0,m.KR)([]),enums:(0,m.KR)({}),options:(0,m.KR)({}),row:(0,m.KR)(null),dialog:(0,m.KR)({pick:{show:!1,parameters:null}})}},created(){let e=this,l=k.V.get.object(e.parameters),a=k.V.get.object(l.form);e.template=k.V.get.object(l.template),e.replica=k.V.get.object(l.replica),e.relations=k.V.get.array(l.relations),e.enums={},b.Z.isObject(e.template.enums)&&Object.keys(e.template.enums).forEach((l=>{e.enums[l]=[null].concat(e.template.enums[l])})),e.options={},b.Z.isObject(e.template.options)&&Object.keys(e.template.options).forEach((l=>{e.options[l]=[null].concat(e.template.options[l])})),e.data=k.V.get.object(l.data),e.form=a,e.fields=[],e.is_edit=l.is_edit,e.title=(b.Z.isString(a.title)&&""!==a.title?a.title+" - ":"")+(e.is_edit?e.$t("label.edit"):e.$t("label.new"));let t=k.V.get.array(a.fields);if(e.is_edit){e.id=k.V.id.fromPk(e.form.id,e.data._pk_);for(const a of t){let t=k.V.clone.field(a);t.value=b.Z.getFieldValue(t.name,e.data),"datetime"===t.type&&"epoch"===t.converter?t.value=b.Z.format.date(t.value,{format:t.pattern||null}):"pick"===t.type?b.Z.isDefined(t.value)&&(t.text=b.Z.isFunction(t.format)?t.format(t.value,l.row):t.value+""):b.Z.isFunction(t.format)&&(t.text=t.format(t.value,l.row)),!0!==t.insertable&&!0!==t.editable||e.fields.push(t)}}else for(const o of t)if(o.insertable){let l=k.V.clone.field(o);l.editable=!0,e.fields.push(l)}},methods:{on_pick_select_click(e){let l=this,a=l.template.picks[e.pick];b.Z.isObject(a)?l.dialog.pick={show:!0,parameters:{template:l.template,field:e,pick:a,replica:l.replica}}:uix.error("error.required","label.pick")},on_pick_remove_click(e){e.value=void 0,e.text=void 0},on_close_dialog_pick(e){let l=this;if(e?._pk_){let a=l.dialog.pick.parameters.field,t=b.Z.isFunction(a.format)?a.format(e):e+"";a.value=e,a.text=t}l.dialog.pick={show:!1,parameters:null,field:null}},on_save_click(){let e=this;e.form._grid_id_=e.template._grid_id_,k.V.action.save({id:e.id,fields:e.fields,definition:e.form,replica:e.replica,relations:e.relations,is_edit:e.is_edit,saving:e.saving,onSuccess:function(l){e.$emit("close",{row:l,is_edit:e.is_edit,index:e.index})}})}}};var v=a(2807),_=a(7569),y=a(7066),g=a(5329),V=a(3418),h=a(5779),q=a(9001),x=a(8151),F=a(8020),w=a(3694),Q=a(4609),A=a(7308),U=a(4873),C=a(6721),K=a(7015),W=a(4082),X=a(3815),R=a(3145),$=a(9765),j=a(2467),L=a(1089),Z=a(6334),T=a(7201),P=a(2769),S=a(8582),I=a.n(S);const E=(0,v.A)(f,[["render",r]]),O=E;I()(f,"components",{QCard:_.A,QCardSection:y.A,QItem:g.A,QItemSection:V.A,QItemLabel:h.A,QBtn:q.A,QTooltip:x.A,QInput:F.A,QSelect:w.A,QIcon:Q.A,QPopupProxy:A.A,QTabs:U.A,QTab:C.A,QSeparator:K.A,QTabPanels:W.A,QTabPanel:X.A,QDate:R.A,QTime:$.A,QFab:j.A,QFabAction:L.A,QCardActions:Z.A,QDialog:T.A}),I()(f,"directives",{ClosePopup:P.A})}}]);